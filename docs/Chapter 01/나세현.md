## 1장 HTTP 개관

전 세계의 웹 브라우저, 서버, 웹 애플리케이션은 모두 HTTP(Hypertext Transfer Protocol)를 통해 서로 대화한다.

### 1.1 HTTP: 인터넷의 멀티미디어 배달부

HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용 ➡️ 데이터가 전송 중 손상되거나 꼬이지 않음을 보장  
HTTP 통신이 전송 중 파괴되거나, 중복되거나, 왜곡되는 것을 걱정할 필요 X

---

### 1.2 웹 클라이언트와 서버

웹 콘텐츠는 **웹 서버**에 존재함

- 인터넷의 데이터를 저장하고, HTTP 클라이언트가 요청한 데이터를 제공
- 클라이언트는 서버에게 HTTP 요청을 보내고, 서버는 요청된 데이터를 HTTP 응답으로 돌려줌
- 가장 흔한 클라이언트는 크롬 같은 웹 브라우저

---

### 1.3 리소스

웹 서버는 웹 리소스를 관리하고 제공함  
가장 단순한 웹 리소스는 텍스트 파일, HTML 파일, JPEG 이미지 파일 등의 **정적 파일**

#### 1.3.1 미디어 타입

웹 서버는 모든 HTTP 객체 데이터에 MIME 타입을 붙임  
웹 브라우저는 서버로부터 객체를 응답받을 때, 다룰 수 있는 객체인지를 MIME 타입을 통해 확인함

여기서 MIME 타입이란 사선으로 구분해 주 타입/부 타입으로 이루어진 문자열 라벨

- HTML: text/html
- plain ASCII: text/plain
- JPEG: image/jpeg
- GIF: image/gif 등

#### 1.3.2 URI

웹 서버 리소스의 이름: 통합 자원 식별자 혹은 URI로 불림

URI의 종류 두 가지: URL & URN

#### 1.3.3 URL

리소스 식별자의 가장 흔한 형태  
특정 서버의 한 리소스에 대한 구체적인 위치를 서술함

예시: `http://www.joes-hardware.com/specials/saw-blade.gif`

- 스킴(scheme): URL의 첫번째 부분이며, 리소스에 접근하기 위해 사용되는 프로토콜 서술 (http://)
- 서버의 인터넷 주소 (www.joes-hardware.com)
- 웹 서버의 리소스 (/specials/saw-blade.gif)

#### 1.3.4 URN

콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 함  
➡️ 위치 독립적이기 때문에 리소스를 여기저기로 옮기더라도 문제없이 동작 (이름만 유지하는 한 다른 프로토콜로 접근해도 상관 X)

예시: `urn:ietf:rfc:2141`

아직 실험 중이고 널리 채택되지 않았음

---

### 1.4 트랜잭션

HTTP 트랜잭션의 구성:

- 요청 명령 (client to server) - 요청 메시지는 명령과 URI를 포함
- 응답 결과 (server to client) - HTTP 응답 메시지는 트랜잭션의 결과를 포함

#### 1.4.1 메서드

메서드는 서버에게 어떤 동작이 취해져야 하는지를 말해줌

흔히 쓰이는 메서드들:

| HTTP 메서드 | 설명                                                                |
| ----------- | ------------------------------------------------------------------- |
| GET         | 서버에서 클라이언트로 지정한 리소스를 보내라                        |
| PUT         | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장해라 |
| DELETE      | 지정한 리소스를 서버에서 삭제해라                                   |
| POST        | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라         |
| HEAD        | 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 보내라               |

#### 1.4.2 상태 코드

모든 HTTP 응답 메시지는 상태 코드와 함께 반환됨

흔히 쓰이는 상태 코드들:

| HTTP 상태 코드 | 설명                                           |
| -------------- | ---------------------------------------------- |
| 200            | 좋다. 문서가 바르게 반환되었다.                |
| 302            | 다시 보내라. 다른 곳에 가서 리소스를 가져가라. |
| 404            | 없음. 리소스를 찾을 수 없다.                   |

#### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다

애플리케이션은 보통 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행함

예: 웹페이지를 가져올 때 HTML을 가져오는 트랜잭션, 첨부된 이미지, 그래픽 조각, 자바 애플릿 등을 가져오기 위한 HTTP 트랜잭션 등

이와 같이 웹페이지는 보통 하나의 리소스가 아니라 여러 리소스의 모음임

---

### 1.5 메시지

- 요청 메시지: 웹 클라이언트에서 웹 서버로 보낸 HTTP 메시지
- 응답 메시지: 그 결과 서버에서 클라이언트로 가는 메시지

HTTP 메시지의 구성 요소:

- **시작줄**: 요청이라면 무엇을 해야 하는지, 응답이라면 무슨 일이 일어났는지 서술
- **헤더**: 0개 이상의 헤더 필드가 이어지며, 각 헤더 필드는 콜론으로 구분되어 있음 (예: `Content-type: text/plain`). 빈 줄로 끝남
- **본문**: 어떤 종류의 데이터든 들어갈 수 있음. 요청의 본문은 웹 서버로 데이터를 실어 보내며 응답의 본문은 클라이언트로 데이터를 반환함

---

### 1.6 TCP 커넥션

메시지는 TCP 커넥션을 통해 어떻게 한 곳에서 다른 곳으로 옮겨갈까?

#### 1.6.1 TCP/IP

TCP가 제공하는 것들:

- 오류 없는 데이터 전송
- 순서에 맞는 전달
- 조각나지 않는 데이터 스트림

TCP/IP는 패킷 교환 네트워크 프로토콜의 집합으로, 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 의사소통을 하게 해 줌  
일단 TCP 커넥션이 맺어지면 클라이언트 & 서버 간에 교환되는 메시지가 없어지거나 손상되거나 순서가 바뀌어 수신되는 일은 결코 X

네트워크 개념상 HTTP 프로토콜은 TCP 위의 계층  
➡️ HTTP는 자신의 메시지 데이터를 전송하기 위해 TCP를 사용함

#### 1.6.2 접속, IP 주소 그리고 포트번호

HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전, IP 주소와 포트 번호를 사용해 클라 - 서버 사이에 TCP/IP 커넥션을 맺어야 함

1. 웹브라우저는 서버의 URL에서 호스트명 추출
2. 웹브라우저는 서버의 호스트명을 IP로 변환
3. 웹브라우저는 URL에서 포트번호(있다면) 추출
4. 웹브라우저는 웹 서버와 TCP 커넥션을 맺음
5. 웹브라우저는 서버에 HTTP 요청을 보냄
6. 서버는 웹브라우저에 HTTP 응답을 돌려줌
7. 커넥션이 닫히면, 웹브라우저는 문서를 보여줌

---

### 1.8 웹의 구성요소

#### 1.8.1 프락시

프락시는 클라이언트와 서버 사이에 위치해, 클라이언트의 모든 HTTP 요청을 받아 서버에 전달함 (사용자 대신 서버에 접근)  
주로 보안을 위해 사용되며, 요청과 응답을 필터링함

#### 1.8.2 캐시

웹캐시와 캐시 프락시는 자신을 거쳐가는 문서들 중 자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버  
➡️ 클라이언트는 멀리 떨어진 웹 서버보다 근처의 캐시에서 훨씬 더 빨리 문서 다운 가능

#### 1.8.3 게이트웨이

다른 서버들의 중개자로 동작하는 특별한 서버 (주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용됨)
